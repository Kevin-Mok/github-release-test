@Library('jenkins-pipeline-shared-libraries')_

pipeline {
    agent any
    environment {
        PROPERTIES_FILE_NAME = "deployment.properties"
        PROPERTIES_FILE = "${WORKSPACE}/${PROPERTIES_FILE_NAME}"
    }
    stages {
        stage('Clone repositories') { 
            steps {
                dir("github-release-test") {
                    script {
                        sh "printf \"a\n\" > ${PROPERTIES_FILE}"
                    }
                }
            }
        }
        stage('Archive staging repository URL') {
            steps {
                script {
                    sh "printf b >> ${PROPERTIES_FILE}"
                    archiveArtifacts(artifacts: "${PROPERTIES_FILE_NAME}")
                }
            }
        }
    }
}
